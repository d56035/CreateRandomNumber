<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>サイトタイトル</title>
  </head>
 
  <body>
    範囲指定：<input type="number" id="init"> から <input type="number" id="term">
    <br>
    <input type="checkbox" name="repeat" checked>数を重複させない</input>
    <br>
    <button type="button" onclick="genNum()">生成</button>
    <button type="button" onclick="resetNum()">リセット</button>
    <script>
      function genNum(){
	var init = document.getElementById("init").value;
	init = parseInt(init);
	var term = document.getElementById("term").value;
	term = parseInt(term);

	if(term-init<0){
          document.getElementById('msg').innerHTML = '始まりの数の方が大きいので小さくしてください。'+ '<br>';
	  return;
	}

	document.getElementById("init").disabled = true;
	document.getElementById("term").disabled = true;

        var random = Math.floor( Math.random() * (term) ) + init;
	const repeat = document.getElementsByName('repeat');

        if(repeat[0].checked){
          var st = document.getElementById('num').innerHTML;
          var array = st.split('<br>').map(Number);
	  array.pop();	
	  if(array.length==term-init+1){
            document.getElementById('msg').innerHTML = 'すべての数が出現しました。リセットしてください。'+ '<br>';
	    return;
	  }
	  while(array.includes(random)) random = Math.floor( Math.random() * (term) ) + init;
          document.getElementById('num').innerHTML += random + '<br>';
          console.log(array);
        }else{
          document.getElementById('num').innerHTML += random + '<br>';
        }
      }
      function resetNum(){
        document.getElementById('num').innerHTML = '';
	document.getElementById('msg').innerHTML = '';
	document.getElementById("init").disabled = false;
	document.getElementById("term").disabled = false;
      }
    </script>
    <p id="msg"></p>
    <p id="num"></p>
  </body>
</html>
